{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{useAuth}from\"../contexts/AuthContext\";import apiClient from\"../services/api\";import{User,Mail,Phone,MapPin,Calendar,Save,ArrowLeft}from\"lucide-react\";import{Link}from\"react-router-dom\";import ImageUpload from\"../components/ImageUpload\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const{user,updateUser,refreshUser}=useAuth();const[formData,setFormData]=useState({full_name:\"\",phone:\"\",address:\"\"});const[profileImage,setProfileImage]=useState(null);const[loading,setLoading]=useState(false);const[saving,setSaving]=useState(false);const[message,setMessage]=useState(\"\");useEffect(()=>{if(user){setFormData({full_name:user.full_name||\"\",phone:user.phone||\"\",address:user.address||\"\"});// Load existing profile image\nif(user.profile_picture_url){try{// For existing images, try to fetch and convert to base64\nif(user.profile_picture_url.startsWith('/uploads/')||user.profile_picture_url.startsWith('http://localhost:5000/api/upload/image/')){const filename=user.profile_picture_url.includes('/')?user.profile_picture_url.split('/').pop():user.profile_picture_url;fetch(`${process.env.REACT_APP_API_URL}/upload/image/${filename}`).then(response=>{if(response.ok){return response.blob();}throw new Error('Failed to load image');}).then(blob=>{const reader=new FileReader();reader.onload=e=>setProfileImage(e.target.result);reader.readAsDataURL(blob);}).catch(error=>{console.error('Failed to load existing profile image:',error);setProfileImage(null);});}else{setProfileImage(user.profile_picture_url);}}catch(error){console.error('Failed to load existing profile image:',error);setProfileImage(null);}}else{setProfileImage(null);}}},[user]);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleImageUploaded=async imageUrl=>{setProfileImage(imageUrl);};const handleSubmit=async e=>{e.preventDefault();setSaving(true);setMessage(\"\");try{const updateData={...formData,profile_picture_url:profileImage||null};await apiClient.put(\"/users/profile\",updateData);// Update user context directly first\nupdateUser({...user,...formData,profile_picture_url:profileImage});// Then try to refresh user data to get updated profile picture\ntry{await refreshUser();}catch(error){console.error(\"Failed to refresh user data:\",error);// Don't show error to user since the update was successful\n}setMessage(\"บันทึกข้อมูลสำเร็จแล้ว\");}catch(error){var _error$response,_error$response$data;console.error(\"Failed to update profile:\",error);setMessage(`เกิดข้อผิดพลาด: ${((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message}`);}finally{setSaving(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4 mb-4\",children:/*#__PURE__*/_jsxs(Link,{to:\"/dashboard\",className:\"inline-flex items-center space-x-2 text-green-500 hover:text-green-600\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E44\\u0E1B\\u0E41\\u0E14\\u0E0A\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E14\"})]})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\\u0E02\\u0E2D\\u0E07\\u0E09\\u0E31\\u0E19\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E15\\u0E31\\u0E27\\u0E41\\u0E25\\u0E30\\u0E23\\u0E39\\u0E1B\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-6\",children:\"\\u0E23\\u0E39\\u0E1B\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 bg-gray-200 rounded-full overflow-hidden mb-4\",children:profileImage?/*#__PURE__*/_jsx(\"img\",{src:profileImage,alt:\"Profile\",className:\"w-full h-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(User,{className:\"h-16 w-16 text-gray-400\"})})}),/*#__PURE__*/_jsx(ImageUpload,{currentImage:profileImage,onImageUploaded:handleImageUploaded,className:\"w-full\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-6\",children:\"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E15\\u0E31\\u0E27\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(User,{className:\"inline h-4 w-4 mr-2\"}),\"\\u0E0A\\u0E37\\u0E48\\u0E2D-\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"full_name\",value:formData.full_name,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Mail,{className:\"inline h-4 w-4 mr-2\"}),\"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:(user===null||user===void 0?void 0:user.email)||\"\",disabled:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"\\u0E44\\u0E21\\u0E48\\u0E2A\\u0E32\\u0E21\\u0E32\\u0E23\\u0E16\\u0E40\\u0E1B\\u0E25\\u0E35\\u0E48\\u0E22\\u0E19\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\\u0E44\\u0E14\\u0E49\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Phone,{className:\"inline h-4 w-4 mr-2\"}),\"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\\u0E17\\u0E4C\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",value:formData.phone,onChange:handleInputChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\",placeholder:\"08x-xxx-xxxx\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"inline h-4 w-4 mr-2\"}),\"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:user!==null&&user!==void 0&&user.created_at?new Date(user.created_at).toLocaleDateString(\"th-TH\"):\"\",disabled:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"inline h-4 w-4 mr-2\"}),\"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48\"]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"address\",value:formData.address,onChange:handleInputChange,rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\",placeholder:\"\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48\\u0E02\\u0E2D\\u0E07\\u0E04\\u0E38\\u0E13\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E1A\\u0E31\\u0E0D\\u0E0A\\u0E35\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49:\"}),/*#__PURE__*/_jsx(\"span\",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${(user===null||user===void 0?void 0:user.role)===\"admin\"?\"bg-purple-100 text-purple-800\":(user===null||user===void 0?void 0:user.role)===\"veterinarian\"?\"bg-blue-100 text-blue-800\":\"bg-green-100 text-green-800\"}`,children:(user===null||user===void 0?void 0:user.role)===\"admin\"?\"ผู้ดูแลระบบ\":(user===null||user===void 0?void 0:user.role)===\"veterinarian\"?\"สัตวแพทย์\":\"ผู้ใช้ทั่วไป\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30:\"}),/*#__PURE__*/_jsx(\"span\",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${user!==null&&user!==void 0&&user.is_active?\"bg-green-100 text-green-800\":\"bg-red-100 text-red-800\"}`,children:user!==null&&user!==void 0&&user.is_active?\"ใช้งาน\":\"ระงับ\"})]})]})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:`p-4 rounded-lg ${message.includes(\"สำเร็จ\")?\"bg-green-100 text-green-800\":\"bg-red-100 text-red-800\"}`,children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:saving,className:\"btn-primary flex items-center space-x-2 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(Save,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:saving?\"กำลังบันทึก...\":\"บันทึกข้อมูล\"})]})})]})]})})]})]})});};export default Profile;","map":{"version":3,"names":["useState","useEffect","useAuth","apiClient","User","Mail","Phone","MapPin","Calendar","Save","ArrowLeft","Link","ImageUpload","jsx","_jsx","jsxs","_jsxs","Profile","user","updateUser","refreshUser","formData","setFormData","full_name","phone","address","profileImage","setProfileImage","loading","setLoading","saving","setSaving","message","setMessage","profile_picture_url","startsWith","filename","includes","split","pop","fetch","process","env","REACT_APP_API_URL","then","response","ok","blob","Error","reader","FileReader","onload","e","target","result","readAsDataURL","catch","error","console","handleInputChange","name","value","prev","handleImageUploaded","imageUrl","handleSubmit","preventDefault","updateData","put","_error$response","_error$response$data","data","className","children","to","src","alt","currentImage","onImageUploaded","onSubmit","type","onChange","required","email","disabled","placeholder","created_at","Date","toLocaleDateString","rows","role","is_active"],"sources":["D:/senior.project/pet-health-docs/frontend/src/pages/Profile.js"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { useAuth } from \"../contexts/AuthContext\"\r\nimport apiClient from \"../services/api\"\r\nimport { User, Mail, Phone, MapPin, Calendar, Save, ArrowLeft } from \"lucide-react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport ImageUpload from \"../components/ImageUpload\"\r\n\r\nconst Profile = () => {\r\n  const { user, updateUser, refreshUser } = useAuth()\r\n  const [formData, setFormData] = useState({\r\n    full_name: \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n  })\r\n  const [profileImage, setProfileImage] = useState(null)\r\n  const [loading, setLoading] = useState(false)\r\n  const [saving, setSaving] = useState(false)\r\n  const [message, setMessage] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setFormData({\r\n        full_name: user.full_name || \"\",\r\n        phone: user.phone || \"\",\r\n        address: user.address || \"\",\r\n      })\r\n      \r\n      // Load existing profile image\r\n      if (user.profile_picture_url) {\r\n        try {\r\n          // For existing images, try to fetch and convert to base64\r\n          if (user.profile_picture_url.startsWith('/uploads/') || user.profile_picture_url.startsWith('http://localhost:5000/api/upload/image/')) {\r\n            const filename = user.profile_picture_url.includes('/') ? user.profile_picture_url.split('/').pop() : user.profile_picture_url\r\n            fetch(`${process.env.REACT_APP_API_URL}/upload/image/${filename}`)\r\n              .then(response => {\r\n                if (response.ok) {\r\n                  return response.blob()\r\n                }\r\n                throw new Error('Failed to load image')\r\n              })\r\n              .then(blob => {\r\n                const reader = new FileReader()\r\n                reader.onload = (e) => setProfileImage(e.target.result)\r\n                reader.readAsDataURL(blob)\r\n              })\r\n              .catch(error => {\r\n                console.error('Failed to load existing profile image:', error)\r\n                setProfileImage(null)\r\n              })\r\n          } else {\r\n            setProfileImage(user.profile_picture_url)\r\n          }\r\n        } catch (error) {\r\n          console.error('Failed to load existing profile image:', error)\r\n          setProfileImage(null)\r\n        }\r\n      } else {\r\n        setProfileImage(null)\r\n      }\r\n    }\r\n  }, [user])\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }))\r\n  }\r\n\r\n  const handleImageUploaded = async (imageUrl) => {\r\n    setProfileImage(imageUrl)\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    setSaving(true)\r\n    setMessage(\"\")\r\n\r\n    try {\r\n      const updateData = {\r\n        ...formData,\r\n        profile_picture_url: profileImage || null\r\n      }\r\n\r\n      await apiClient.put(\"/users/profile\", updateData)\r\n      \r\n      // Update user context directly first\r\n      updateUser({\r\n        ...user,\r\n        ...formData,\r\n        profile_picture_url: profileImage\r\n      })\r\n\r\n      // Then try to refresh user data to get updated profile picture\r\n      try {\r\n        await refreshUser()\r\n      } catch (error) {\r\n        console.error(\"Failed to refresh user data:\", error)\r\n        // Don't show error to user since the update was successful\r\n      }\r\n\r\n      setMessage(\"บันทึกข้อมูลสำเร็จแล้ว\")\r\n    } catch (error) {\r\n      console.error(\"Failed to update profile:\", error)\r\n      setMessage(`เกิดข้อผิดพลาด: ${error.response?.data?.message || error.message}`)\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center space-x-4 mb-4\">\r\n            <Link \r\n              to=\"/dashboard\" \r\n              className=\"inline-flex items-center space-x-2 text-green-500 hover:text-green-600\"\r\n            >\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n              <span>กลับไปแดชบอร์ด</span>\r\n            </Link>\r\n          </div>\r\n          \r\n          <h1 className=\"text-3xl font-bold text-gray-900\">โปรไฟล์ของฉัน</h1>\r\n          <p className=\"text-gray-600 mt-2\">จัดการข้อมูลส่วนตัวและรูปโปรไฟล์</p>\r\n        </div>\r\n\r\n        <div className=\"grid lg:grid-cols-3 gap-8\">\r\n          {/* Profile Picture Section */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"card\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-6\">รูปโปรไฟล์</h2>\r\n              <div className=\"flex flex-col items-center\">\r\n                <div className=\"w-32 h-32 bg-gray-200 rounded-full overflow-hidden mb-4\">\r\n                  {profileImage ? (\r\n                    <img \r\n                      src={profileImage} \r\n                      alt=\"Profile\" \r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-full h-full flex items-center justify-center\">\r\n                      <User className=\"h-16 w-16 text-gray-400\" />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <ImageUpload \r\n                  currentImage={profileImage} \r\n                  onImageUploaded={handleImageUploaded} \r\n                  className=\"w-full\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Profile Information Section */}\r\n          <div className=\"lg:col-span-2\">\r\n            <div className=\"card\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-6\">ข้อมูลส่วนตัว</h2>\r\n              \r\n              <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                {/* Basic Information */}\r\n                <div className=\"grid md:grid-cols-2 gap-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      <User className=\"inline h-4 w-4 mr-2\" />\r\n                      ชื่อ-นามสกุล\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"full_name\"\r\n                      value={formData.full_name}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      <Mail className=\"inline h-4 w-4 mr-2\" />\r\n                      อีเมล\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      value={user?.email || \"\"}\r\n                      disabled\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500\"\r\n                    />\r\n                    <p className=\"text-xs text-gray-500 mt-1\">ไม่สามารถเปลี่ยนอีเมลได้</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid md:grid-cols-2 gap-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      <Phone className=\"inline h-4 w-4 mr-2\" />\r\n                      เบอร์โทรศัพท์\r\n                    </label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      name=\"phone\"\r\n                      value={formData.phone}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                      placeholder=\"08x-xxx-xxxx\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      <Calendar className=\"inline h-4 w-4 mr-2\" />\r\n                      วันที่สมัคร\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={user?.created_at ? new Date(user.created_at).toLocaleDateString(\"th-TH\") : \"\"}\r\n                      disabled\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    <MapPin className=\"inline h-4 w-4 mr-2\" />\r\n                    ที่อยู่\r\n                  </label>\r\n                  <textarea\r\n                    name=\"address\"\r\n                    value={formData.address}\r\n                    onChange={handleInputChange}\r\n                    rows={3}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                    placeholder=\"กรอกที่อยู่ของคุณ\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Role Information */}\r\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                  <h3 className=\"text-sm font-medium text-gray-700 mb-2\">ข้อมูลบัญชี</h3>\r\n                  <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\r\n                    <div>\r\n                      <span className=\"text-gray-600\">ประเภทผู้ใช้:</span>\r\n                      <span className={`ml-2 px-2 py-1 rounded-full text-xs font-medium ${\r\n                        user?.role === \"admin\" ? \"bg-purple-100 text-purple-800\" :\r\n                        user?.role === \"veterinarian\" ? \"bg-blue-100 text-blue-800\" :\r\n                        \"bg-green-100 text-green-800\"\r\n                      }`}>\r\n                        {user?.role === \"admin\" ? \"ผู้ดูแลระบบ\" :\r\n                         user?.role === \"veterinarian\" ? \"สัตวแพทย์\" : \"ผู้ใช้ทั่วไป\"}\r\n                      </span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"text-gray-600\">สถานะ:</span>\r\n                      <span className={`ml-2 px-2 py-1 rounded-full text-xs font-medium ${\r\n                        user?.is_active ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\"\r\n                      }`}>\r\n                        {user?.is_active ? \"ใช้งาน\" : \"ระงับ\"}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Message */}\r\n                {message && (\r\n                  <div className={`p-4 rounded-lg ${\r\n                    message.includes(\"สำเร็จ\") ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\"\r\n                  }`}>\r\n                    {message}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Submit Button */}\r\n                <div className=\"flex justify-end\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={saving}\r\n                    className=\"btn-primary flex items-center space-x-2 disabled:opacity-50\"\r\n                  >\r\n                    <Save className=\"h-4 w-4\" />\r\n                    <span>{saving ? \"กำลังบันทึก...\" : \"บันทึกข้อมูล\"}</span>\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profile\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}